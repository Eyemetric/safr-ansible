---


# - name: Install SAFR v1.5 services and dependencies.
#   hosts: all
#   remote_user: "{{ eyemetric_user }}"
#   become: yes


#   roles:
#     - role: safr-v1_5

#   post_tasks:
#     - name: Print a message
#       debug:
#         msg: "Running post tasks for Safr Play"

- name: Install Paravision (v6) services
  hosts: paravision
  remote_user: "{{ eyemetric_user }}"
  become: yes

  roles:
    - role: paravision-v6
# ------------------------
# DATA PLAY
# ------------------------
# - name: Install initial data volumes for new installs
#   hosts: all
#   remote_user: "{{ eyemetric_user }}"
#   become: yes

#   tasks:
#     - name: Run the data tasks
#       include_tasks: tasks/dbtasks.yml


---
- name: Subscribe and auto-attach a Red Hat subscription
  hosts: all
  become: yes
  vars:
    redhat_username: <YOUR_RED_HAT_USERNAME>
    redhat_password: <YOUR_RED_HAT_PASSWORD>
  tasks:
    - name: Register the system with the Red Hat Customer Portal
      ansible.builtin.redhat_subscription:
        state: present
        username: "{{ redhat_username }}"
        password: "{{ redhat_password }}"
        auto_attach: true

# NOTE: don't know what to do with this yet.
# - name: Register with RHEL play
#   #- name: Prepare GPU and Podman for FR
#   #hosts: fr_laptops
#   hosts: home
#   become: yes
#   vars:
#     subscription_username: "brightblade42"
#     subscription_password: "R2y1a1n@"
#     base_dir: "/home/eyemetric"
#     rhel_ver: {{ ansible_distribution_major_version }}
#     register_rhel: false

#   tasks:
#     # Dependencies and prerequisites setup and install
#     # This works in the lab but in prod we won't be using
#     # a dev subscription. The org may have their own
#     - name: Register RHEL installation with sub
#       community.general.redhat_subscription:
#         state: present
#         username: "{{ subscription_username }}"
#         password: "{{ subscription_password }}"
#         auto_attach: true

#   when: ansible_distribution == "RedHat"
